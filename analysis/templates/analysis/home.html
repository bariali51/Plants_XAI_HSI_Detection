<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Disease Classifier | Pro</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --primary-color: #0d5f2f;      /* Deep Forest Green */
            --secondary-color: #4caf50;    /* Vibrant Green */
            --accent-color: #ffd700;       /* Gold Accent */
            --bg-color: #f0f4f3;           /* Minty Grey Background */
            --glass-bg: rgba(255, 255, 255, 0.95);
            --text-main: #1a202c;
            --text-secondary: #718096;
            --border-radius: 16px;
            --shadow-sm: 0 4px 6px -1px rgba(0,0,0,0.05);
            --shadow-md: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
            outline: none;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            display: flex;
            min-height: 100vh;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 280px;
            background: #ffffff;
            border-right: 1px solid rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            padding: 24px;
            position: fixed;
            height: 100vh;
            z-index: 100;
            box-shadow: 4px 0 24px rgba(0,0,0,0.02);
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .logo-text {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary-color);
            line-height: 1.2;
        }

        .nav-item {
            margin-bottom: 30px;
        }

        .nav-title {
            text-transform: uppercase;
            font-size: 0.75rem;
            color: #a0aec0;
            font-weight: 700;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .nav-content {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .nav-content ul {
            padding-left: 0;
            list-style: none;
        }

        .nav-content li {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-content i {
            color: var(--secondary-color);
            font-size: 0.8rem;
        }

        .developer-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            padding: 8px;
            background: #f8fafc;
            border-radius: 8px;
        }

        .dev-avatar {
            width: 32px;
            height: 32px;
            background: #cbd5e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            color: #fff;
            font-weight: bold;
        }

        .sidebar-footer {
            margin-top: auto;
            font-size: 0.8rem;
            color: #a0aec0;
        }

        /* --- MAIN CONTENT --- */
        .main-content {
            margin-left: 280px;
            flex-grow: 1;
            padding: 40px 60px;
            max-width: 1400px;
        }

        /* HEADER */
        .top-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 40px;
        }

        .page-title h1 {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-main);
            margin: 0 0 8px 0;
            letter-spacing: -0.5px;
        }

        .page-title p {
            color: var(--text-secondary);
            margin: 0;
        }

        .status-badge {
            background: rgba(76, 175, 80, 0.1);
            color: var(--primary-color);
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--secondary-color);
            border-radius: 50%;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(76, 175, 80, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }

        /* GRID */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 32px;
        }

        /* CARDS */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 24px;
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(255,255,255,0.8);
            transition: var(--transition);
        }

        .glass-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-main);
            margin: 0;
        }

        /* UPLOAD */
        .upload-zone {
            border: 2px dashed #cbd5e0;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: #fafbfc;
            position: relative;
        }

        .upload-zone:hover, .upload-zone.drag-over {
            border-color: var(--secondary-color);
            background: rgba(76, 175, 80, 0.05);
        }

        .upload-icon {
            font-size: 2.5rem;
            color: #a0aec0;
            margin-bottom: 16px;
            transition: var(--transition);
        }

        .upload-zone:hover .upload-icon {
            color: var(--secondary-color);
            transform: scale(1.1);
        }

        /* --- VISUALIZATION BOXES (New) --- */
        .vis-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .preview-box {
            width: 100%;
            height: 320px; /* Adjusted height for split view */
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .preview-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        /* Floating Labels */
        .img-label {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(13, 95, 47, 0.9);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 10;
            backdrop-filter: blur(4px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Placeholders */
        .placeholder-state {
            text-align: center;
            color: #a0aec0;
            transition: opacity 0.3s;
        }

        .placeholder-state i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            opacity: 0.3;
        }

        .placeholder-state p { margin: 0; font-size: 0.9rem; font-weight: 500; }

        /* Scanning Animation */
        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(76, 175, 80, 0.5), transparent);
            transform: translateY(-100%);
            display: none;
            z-index: 5;
            pointer-events: none;
        }

        .scan-line.active {
            display: block;
            animation: scan 1.5s ease-in-out infinite;
        }

        @keyframes scan {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }

        /* QUICK ACTIONS */
        .chip-container {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .chip {
            padding: 8px 16px;
            background: #edf2f7;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .chip:hover {
            background: white;
            border-color: var(--secondary-color);
            color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        /* RESULTS AREA */
        #results-section {
            margin-top: 32px;
            display: none; /* Toggled via JS */
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease-out;
        }

        #results-section.visible {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .result-header {
            background: linear-gradient(135deg, var(--primary-color), #145c32);
            padding: 30px;
            border-radius: var(--border-radius);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 25px rgba(13, 95, 47, 0.2);
            margin-bottom: 32px;
        }

        .diagnosis-main h2 {
            margin: 0;
            font-size: 2rem;
        }

        .confidence-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 8px;
            backdrop-filter: blur(5px);
            font-weight: 600;
            margin-top: 8px;
            display: inline-block;
        }

        /* STATS GRID */
        .stats-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 32px;
        }

        /* CUSTOM BAR CHART */
        .chart-row {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .chart-label {
            width: 150px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .chart-bar-bg {
            flex-grow: 1;
            height: 12px;
            background: #edf2f7;
            border-radius: 6px;
            overflow: hidden;
            margin: 0 16px;
        }

        .chart-bar-fill {
            height: 100%;
            background: var(--secondary-color);
            border-radius: 6px;
            width: 0;
            transition: width 1.5s cubic-bezier(0.22, 1, 0.36, 1);
            background: linear-gradient(90deg, var(--secondary-color), #81c784);
        }

        .chart-value {
            width: 50px;
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--text-main);
        }

        /* INFO TABS */
        .info-card {
            background: #fff;
            padding: 24px;
            border-radius: var(--border-radius);
            height: 100%;
        }

        .info-icon {
            width: 40px;
            height: 40px;
            background: #e8f5e9;
            color: var(--primary-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            font-size: 1.2rem;
        }

        /* TABLE STYLING */
        .modern-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 8px;
        }

        .modern-table th {
            text-align: left;
            padding: 0 16px;
            color: #a0aec0;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
        }

        .modern-table td {
            background: white;
            padding: 16px;
            border: 1px solid #edf2f7;
        }

        .modern-table tr td:first-child { border-radius: 8px 0 0 8px; border-left: 1px solid #edf2f7; }
        .modern-table tr td:last-child { border-radius: 0 8px 8px 0; border-right: 1px solid #edf2f7; }

        .modern-table tr.highlight td {
            background: #f0fff4;
            border-color: #c6f6d5;
            color: #22543d;
            font-weight: 600;
        }

        /* FLOATING ACTION */
        .fab-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 900;
        }

        .fab-main {
            width: 56px;
            height: 56px;
            background: #e53e3e;
            border-radius: 16px;
            box-shadow: 0 8px 20px rgba(229, 62, 62, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            border: none;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .fab-main:hover { transform: scale(1.05); }

    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="logo-area">
            <div class="logo-icon"><i class="fas fa-leaf"></i></div>
            <div class="logo-text">PlantGuard<br><span style="font-weight:400; font-size:0.9rem; color:#718096">AI Classifier</span></div>
        </div>

        <div class="nav-item">
            <div class="nav-title">Model Specs</div>
            <div class="nav-content">
                <ul>
                    <li><i class="fas fa-layer-group"></i> CNN Architecture (5 Blocks)</li>
                    <li><i class="fas fa-bullseye"></i> 96.5% Accuracy</li>
                    <li><i class="fas fa-database"></i> PlantVillage Dataset</li>
                </ul>
            </div>
        </div>

        <div class="nav-item">
            <div class="nav-title">Developers</div>
            <div class="nav-content">
                <div class="developer-profile">
                    <div class="dev-avatar">AB</div>
                    <div>
                        <div style="font-weight:600; font-size:0.85rem;">Ali BARI</div>
                        <div style="font-size:0.7rem; color:#a0aec0;">ML Engineer</div>
                    </div>
                </div>
                <div class="developer-profile">
                    <div class="dev-avatar">MM</div>
                    <div>
                        <div style="font-weight:600; font-size:0.85rem;">Mohamed A. Meklid</div>
                        <div style="font-size:0.7rem; color:#a0aec0;">Frontend Dev</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar-footer">
            <div style="font-size: 0.75rem; margin-bottom: 10px;">
                <i class="fab fa-github"></i> <a href="#" style="color:#718096; text-decoration:none;">View Source Code</a>
            </div>
            ¬© 2025 PlantGuard AI
        </div>
    </nav>

    <main class="main-content">
        <div class="top-header">
            <div class="page-title">
                <h1>Disease Diagnostics</h1>
                <p>Upload a leaf image to detect potential pathologies instantly.</p>
            </div>
            <div class="status-badge">
                <div class="status-dot"></div> System Online
            </div>
        </div>

        <div class="dashboard-grid">

            <div class="controls-column">
                <div class="glass-card">
                    <div class="card-header">
                        <h3 class="card-title">Upload Image</h3>
                        <i class="fas fa-cloud-upload-alt" style="color:#a0aec0;"></i>
                    </div>

                    <div class="upload-zone" id="drop-area">
                        <input type="file" id="file-input" accept="image/*" style="position:absolute; width:100%; height:100%; top:0; left:0; opacity:0; cursor:pointer;">
                        <i class="fas fa-image upload-icon"></i>
                        <p style="margin:0; font-weight:600; color:var(--text-main);">Drop image here</p>
                        <p style="margin:5px 0 0 0; font-size:0.8rem; color:#a0aec0;">or click to browse</p>
                    </div>

                    <div style="margin-top:24px;">
                        <p style="font-size:0.8rem; font-weight:700; color:#a0aec0; margin-bottom:10px; text-transform:uppercase;">Quick Test</p>
                        <div class="chip-container">
                            <div class="chip" onclick="simulateUpload('tomato')">üçÖ Healthy Tomato</div>
                            <div class="chip" onclick="simulateUpload('potato')">ü•î Potato Blight</div>
                            <div class="chip" onclick="simulateUpload('pepper')">üå∂Ô∏è Pepper Spot</div>
                        </div>
                    </div>
                </div>

                <div class="glass-card" style="margin-top: 24px; max-height: 300px; overflow:hidden;">
                    <div class="card-header">
                        <h3 class="card-title">Supported Classes</h3>
                        <span style="font-size:0.8rem; color:#a0aec0;">15 Types</span>
                    </div>
                    <div style="height: 200px; overflow-y: auto; padding-right:5px;">
                        <table class="modern-table" style="font-size:0.85rem;">
                            <tr><td>Pepper Bell Bacterial Spot</td></tr>
                            <tr class="highlight"><td>Pepper Bell Healthy</td></tr>
                            <tr><td>Potato Early Blight</td></tr>
                            <tr><td>Potato Late Blight</td></tr>
                            <tr><td>Potato Healthy</td></tr>
                            <tr><td>Tomato Bacterial Spot</td></tr>
                             <tr><td>Tomato Early Blight</td></tr>
                             <tr><td>Tomato Late Blight</td></tr>
                             <tr><td>Tomato Leaf Mold</td></tr>
                            <tr><td>Tomato Septoria Leaf Spot</td></tr>
                            <tr><td>Tomato Spider Mites Two Spotted Spider Mite</td></tr>
                            <tr><td>Tomato Target Spot</td></tr>
                            <tr><td>Tomato Tomato Yellowleaf Curl Virus</td></tr>
                            <tr><td>Tomato Tomato Mosaic Virus</td></tr>
                            <tr><td>Tomato Healthy</td></tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="vis-column">

                <div class="vis-grid">
                    <div class="glass-card" style="padding:0; overflow:hidden; border:none; position:relative;">
                        <div class="img-label">
                            <i class="fas fa-camera"></i> Original
                        </div>
                        <div class="preview-box">
                            <div id="placeholder-original" class="placeholder-state">
                                <i class="fas fa-leaf"></i>
                                <p>No Input</p>
                            </div>
                            <img id="preview-img" src="" alt="Original Input">
                        </div>
                    </div>

                    <div class="glass-card" style="padding:0; overflow:hidden; border:none; position:relative;">
                        <div class="img-label" style="background: rgba(255, 152, 0, 0.9);">
                            <i class="fas fa-fire"></i> Grad-CAM
                        </div>
                        <div class="preview-box">
                            <div id="placeholder-gradcam" class="placeholder-state">
                                <i class="fas fa-layer-group"></i>
                                <p>Waiting...</p>
                            </div>
                            <img id="gradcam-img" src="" alt="AI Attention Map" style="filter: sepia(1) hue-rotate(280deg) contrast(1.2);">

                            <div id="scan-overlay" class="scan-line"></div>
                        </div>
                    </div>
                </div>

                <div id="results-section">
                    <div class="result-header">
                        <div class="diagnosis-main">
                            <div style="font-size:0.9rem; opacity:0.8; margin-bottom:4px;">Analysis Result</div>
                            <h2 id="diagnosis-title">Pepper Bell Healthy</h2>
                            <div class="confidence-badge" id="confidence-text"><i class="fas fa-check-circle"></i> 98.4% Confidence</div>
                        </div>
                        <div style="font-size:3rem; opacity:0.2;">
                            <i class="fas fa-microscope"></i>
                        </div>
                    </div>

                    <div class="stats-container">
                        <div class="glass-card">
                            <div class="card-header">
                                <h3 class="card-title">Probability Distribution</h3>
                            </div>
                            <div id="chart-bars">
                                </div>
                        </div>

                        <div class="info-card">
                            <div class="info-icon"><i class="fas fa-notes-medical"></i></div>
                            <h4 style="margin:0 0 8px 0;">Recommendation</h4>
                            <p style="font-size:0.9rem; color:var(--text-secondary); line-height:1.6;" id="treatment-text">
                                The plant appears healthy. Maintain regular watering schedule and continue monitoring for pests.
                            </p>
                        </div>
                    </div>

                    <div class="glass-card" style="margin-top: 32px;">
                        <h3 class="card-title" style="margin-bottom:20px;">Detailed Metrics</h3>
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Classification</th>
                                    <th>Confidence Score</th>
                                </tr>
                            </thead>
                            <tbody id="prediction-table-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="fab-container">
        <div style="width:40px; height:40px; border-radius:50%; background:#fff; overflow:hidden; border:2px solid #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
            <img src="https://ui-avatars.com/api/?name=Admin&background=0D8ABC&color=fff" style="width:100%; height:100%;">
        </div>
        <button class="fab-main">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <script>
        // --- LOGIC ---
        const fileInput = document.getElementById('file-input');

        // Grab new Elements
        const previewImg = document.getElementById('preview-img');
        const gradcamImg = document.getElementById('gradcam-img');
        const placeholderOrig = document.getElementById('placeholder-original');
        const placeholderGrad = document.getElementById('placeholder-gradcam');
        const scanOverlay = document.getElementById('scan-overlay');

        const resultsSection = document.getElementById('results-section');
        const dropArea = document.getElementById('drop-area');

        // Drag & Drop visual feedback
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });
        function preventDefaults(e) { e.preventDefault(); e.stopPropagation(); }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.add('drag-over'), false);
        });
        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.remove('drag-over'), false);
        });

        // Handle File Selection
        fileInput.addEventListener('change', handleFiles);
        dropArea.addEventListener('drop', (e) => {
            const dt = e.dataTransfer;
            const files = dt.files;
            fileInput.files = files; // update input
            handleFiles({ target: { files: files } });
        });

        function handleFiles(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    // Default to 'pepper' for uploaded files in this demo
                    processImage(event.target.result, 'pepper');
                }
                reader.readAsDataURL(file);
            }
        }

        // Simulate One-Click
        function simulateUpload(type) {
            let dummySrc = 'https://images.unsplash.com/photo-1591857177580-dc82b9e4e1aa?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80';
            if(type === 'tomato') dummySrc = 'https://images.unsplash.com/photo-1592841200221-a6898f307baa?auto=format&fit=crop&w=800&q=80';
            if(type === 'potato') dummySrc = 'https://images.unsplash.com/photo-1518977676651-71f6480bc4f0?auto=format&fit=crop&w=800&q=80';

            processImage(dummySrc, type);
        }

        function processImage(src, type) {
            // 1. Reset UI
            resultsSection.classList.remove('visible');

            // 2. Display Original Image
            previewImg.src = src;
            previewImg.style.display = 'block';
            placeholderOrig.style.display = 'none';

            // 3. Prepare Grad-CAM (Hidden initially)
            gradcamImg.src = src; // In real app, this would be a different URL
            gradcamImg.style.display = 'none';
            placeholderGrad.style.display = 'flex';

            // 4. Start Scanning Animation
            scanOverlay.classList.add('active');

            // 5. Simulate Processing Delay (1.5 seconds)
            setTimeout(() => {
                // Show Heatmap
                gradcamImg.style.display = 'block';
                placeholderGrad.style.display = 'none';
                scanOverlay.classList.remove('active'); // Stop scanning

                // Show Results Panel
                showResults(type);
                resultsSection.classList.add('visible');
                resultsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 1500);
        }

        function showResults(type) {
            // Mock Data
            const data = [
                { name: "Pepper Bell Healthy", score: 98.4, color: "#4caf50" },
                { name: "Pepper Bacterial Spot", score: 1.2, color: "#ff9800" },
                { name: "Tomato Bacterial Spot", score: 0.3, color: "#f44336" },
                { name: "Potato Late Blight", score: 0.1, color: "#9e9e9e" }
            ];

            if(type === 'potato') {
                 data[0] = { name: "Potato Late Blight", score: 92.1, color: "#f44336" };
                 data[1] = { name: "Potato Early Blight", score: 5.4, color: "#ff9800" };
            }
            if(type === 'tomato') {
                 data[0] = { name: "Tomato Healthy", score: 95.5, color: "#4caf50" };
                 data[1] = { name: "Tomato Early Blight", score: 3.2, color: "#ff9800" };
            }

            // Update Header
            const topResult = data[0];
            document.getElementById('diagnosis-title').innerText = topResult.name;
            document.getElementById('confidence-text').innerHTML = `<i class="fas fa-check-circle"></i> ${topResult.score}% Confidence`;

            // Recommendation Text Logic
            const recText = document.getElementById('treatment-text');
            if(topResult.color === "#4caf50") {
                recText.innerText = "The plant appears healthy. Maintain regular watering schedule and continue monitoring for pests.";
            } else {
                recText.innerText = "Pathology detected. Isolate the plant immediately. Consider applying copper-based fungicides and removing affected leaves.";
            }

            // Render Chart
            const chartContainer = document.getElementById('chart-bars');
            chartContainer.innerHTML = '';

            data.forEach(item => {
                const row = document.createElement('div');
                row.className = 'chart-row';
                row.innerHTML = `
                    <div class="chart-label">${item.name}</div>
                    <div class="chart-bar-bg">
                        <div class="chart-bar-fill" style="width: 0%; background: ${item.color}"></div>
                    </div>
                    <div class="chart-value">${item.score}%</div>
                `;
                chartContainer.appendChild(row);

                // Trigger animation after render
                setTimeout(() => {
                    row.querySelector('.chart-bar-fill').style.width = `${item.score}%`;
                }, 100);
            });

            // Render Table
            const tableBody = document.getElementById('prediction-table-body');
            tableBody.innerHTML = '';
            data.forEach((item, index) => {
                const tr = document.createElement('tr');
                if(index === 0) tr.classList.add('highlight');
                tr.innerHTML = `
                    <td>#${index + 1}</td>
                    <td>${item.name}</td>
                    <td>${item.score}%</td>
                `;
                tableBody.appendChild(tr);
            });
        }
    </script>
</body>
</html>